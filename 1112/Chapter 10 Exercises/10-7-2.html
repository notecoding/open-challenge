<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>산수 2</title>
    <script>
        function c(){
            let total=0;
        let qindex=document.getElementsByClassName("q");
        let aindex=document.getElementsByClassName("answer");
        for(let i=0;i<qindex.length;i++){
            let q=qindex[i].innerHTML;
            let correct=Math.floor(eval(q));
            let user=aindex[i].value;
            if(user=="" || isNaN(user)){
                total+=0;
                qindex[i].style.textDecoration="line-through";
            }
            else if(parseInt(user) == correct){
                total += 1;
                qindex[i].style.textDecoration="none";
            }
            else{
                total+=0;
                qindex[i].style.textDecoration="line-through";
            }
            document.getElementById("s").innerHTML=total;
        }        
        }

        function re(){
            let qindex=document.getElementsByClassName("q");
            let aindex=document.getElementsByClassName("answer");

            for(let i=0; i<qindex.length; i++){
                let num1=Math.floor(Math.random()*20)+1;
                let num2=Math.floor(Math.random()*20)+1;
                let op=Math.floor(Math.random()*4);
                let oper="+";
                switch (op){
                    case 0:
                        oper="+";
                        break;
                    case 1:
                        oper="-";
                        break;
                    case 2:
                        oper="*";
                        break;
                    case 3:
                        oper="/";
                        break;
                }
                qindex[i].innerHTML=num1+oper+num2;
                qindex[i].style.textDecoration="none";
                aindex[i].value="";
                document.getElementById("s").innerHTML=0;
                
            }

        }
    </script>
</head>
<body onload="re()">
    <h3>산수 문제를 풀어 봅시다.</h3>
    <p>자동으로 문제가 만들어집니다. 답 입력 후 채점 버튼을 누르세요
        다시 버튼을 누르면 새로운 문제가 출력됩니다.나누기 결과는 정수입니다.
    </p>
    <hr>
    <form>
        <table>
            <tr>
                <td class="q"></td>
                <td><input class="answer" type="text"></td>
            </tr>
            <tr>
                <td class="q"></td>
                <td><input class="answer" type="text"></td>
            </tr>
            <tr>
                <td class="q"></td>
                <td><input class="answer" type="text"></td>
            </tr>
            <tr>
                <td class="q"></td>
                <td><input class="answer" type="text"></td>
            </tr>
            <tr>
                <td><button type="button" onclick="c()">채점</button></td>
                <td><span id="s">0</span></td>
                <td><button type="button" onclick="re()">다시</button></td>
                
            </tr>
        </table>
    </form>
</body>
</html>